<VirtualHost *:80>
    # Основные настройки
    ServerName mysms.local
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/mysmsservice/public

    # Логирование
    ErrorLog ${APACHE_LOG_DIR}/mysms_error.log
    CustomLog ${APACHE_LOG_DIR}/mysms_access.log combined

    # Настройки основной директории
    <Directory /var/www/mysmsservice/public>
        Options -Indexes +FollowSymLinks +MultiViews
        AllowOverride All
        Require all granted
        
        # Для PHP файлов
        <FilesMatch \.php$>
            SetHandler application/x-httpd-php
        </FilesMatch>
    </Directory>

    # Дополнительные настройки безопасности
    <Directory /var/www/mysmsservice>
        Options -Indexes
        AllowOverride None
        Require all denied
    </Directory>

    # Разрешаем доступ только к public папке
    <Directory /var/www/mysmsservice/public>
        Require all granted
    </Directory>

    # Настройки для загрузки файлов
    <Directory /var/www/mysmsservice/public/uploads>
        AllowOverride None
        Require all granted
    </Directory>
</VirtualHost>
